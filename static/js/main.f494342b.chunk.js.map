{"version":3,"sources":["fbase.js","components/AuthForm.js","routes/Auth.js","components/Nweet.js","components/NweetFactory.js","routes/Home.js","components/Navigation.js","routes/Profile.js","components/Router.js","components/App.js","index.js"],"names":["firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","MESSAGIN_ID","appId","initializeApp","authService","getAuth","dbService","getFirestore","storageService","getStorage","AuthForm","newAccount","toggleAccount","useState","email","setEmail","password","setPassword","error","setError","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","signInWithEmailAndPassword","message","className","type","placeholder","required","onClick","Auth","setNewAccount","onSocialClick","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","data","console","log","code","icon","faTwitter","color","size","style","marginBottom","prev","faGoogle","faGithub","Nweet","nweetObj","isOwner","editing","setEditing","text","newNweet","setNewNweet","onDeleteClick","ok","window","confirm","deleteDoc","doc","id","attachmentUrl","deleteObject","ref","toggleEditing","updateDoc","autoFocus","src","alt","faTrash","faPencilAlt","NweetFactory","userObj","nweet","setNweet","attachment","setAttachment","uploadString","uid","uuidv4","uploadResult","getDownloadURL","addDoc","collection","createdAt","Date","now","creatorId","maxLength","for","faPlus","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","readAsDataURL","opacity","backgroundImage","faTimes","Home","nweets","setNweets","useEffect","onSnapshot","snapshot","nweetObjArray","docs","map","sort","b","marginTop","Navigation","displayName","display","justifyContent","to","marginRight","marginLeft","flexDirection","alignItems","fontSize","faUser","Profile","refreshUser","newDisplayName","setNewDisplayName","myNweets","setMyNweets","getMyNweets","stmt","query","where","orderBy","getDocs","forEach","push","updateProfile","currentUser","signOut","AppRouter","path","element","maxWidth","width","margin","App","init","setInit","setUserObj","onAuthStateChanged","user","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f494342b.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.MESSAGIN_ID,\r\n  appId: process.env.REACT_APP_APP_ID\r\n};\r\n\r\ninitializeApp(firebaseConfig);\r\n\r\nexport const authService = getAuth();\r\nexport const dbService = getFirestore();\r\nexport const storageService = getStorage();\r\n\r\nexport {\r\n  ref,\r\n  uploadString,\r\n  getDownloadURL,\r\n  deleteObject\r\n} from 'firebase/storage';\r\n\r\nexport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  getDocs,\r\n  onSnapshot,\r\n  deleteDoc,\r\n  updateDoc,\r\n  query,\r\n  where,\r\n  orderBy\r\n} from \"firebase/firestore\";\r\n\r\nexport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  signInWithPopup,\r\n  GoogleAuthProvider,\r\n  GithubAuthProvider,\r\n  updateProfile,\r\n} from \"firebase/auth\";\r\n\r\n","import React, { useState } from \"react\"\r\nimport {\r\n  authService,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from \"fbase\";\r\nconst AuthForm = ({ newAccount, toggleAccount }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const onChange = (event) => {\r\n    const { target: { name, value } } = event;\r\n    if (name === \"email\") {\r\n      setEmail(value);\r\n    } else if (name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  }\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      let data;\r\n      if (newAccount) {\r\n        // create account\r\n        data = await createUserWithEmailAndPassword(\r\n          authService,\r\n          email,\r\n          password);\r\n      }\r\n      else {\r\n        // log in\r\n        data = await signInWithEmailAndPassword(\r\n          authService,\r\n          email,\r\n          password\r\n        );\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit} className=\"container\">\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          value={email}\r\n          onChange={onChange}\r\n          className=\"authInput\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n          value={password}\r\n          onChange={onChange}\r\n          className=\"authInput\"\r\n        />\r\n        <input\r\n          type=\"submit\"\r\n          className=\"authInput authSubmit\"\r\n          value={newAccount ? \"Create Account\" : \"Sign In\"}\r\n        />\r\n        {error && <span className=\"authError\">{error}</span>}\r\n      </form>\r\n      <span onClick={toggleAccount} className=\"authSwitch\">\r\n        {newAccount ? \"Sign in.\" : \"Create Account\"}\r\n      </span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AuthForm;","import React, { useState } from 'react';\r\nimport {\r\n  authService,\r\n  signInWithPopup,\r\n  GithubAuthProvider,\r\n  GoogleAuthProvider\r\n} from 'fbase';\r\nimport AuthForm from 'components/AuthForm';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faTwitter,\r\n  faGoogle,\r\n  faGithub,\r\n} from \"@fortawesome/free-brands-svg-icons\";\r\n\r\nconst Auth = () => {\r\n  const [newAccount, setNewAccount] = useState(true);\r\n  const toggleAccount = () => setNewAccount((prev) => !prev);\r\n  const onSocialClick = async (event) => {\r\n    const {\r\n      target: { name },\r\n    } = event;\r\n    let provider;\r\n    if (name === \"google\") {\r\n      provider = new GoogleAuthProvider();\r\n    } else if (name === \"github\") {\r\n      provider = new GithubAuthProvider();\r\n    }\r\n    try {\r\n      const data = await signInWithPopup(authService, provider);\r\n      console.log(data);\r\n    } catch (error) {\r\n      if (error.code !== \"auth/popup-closed-by-user\") {\r\n        console.log(error.message);\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"authContainer\">\r\n      <FontAwesomeIcon\r\n        icon={faTwitter}\r\n        color={\"#04AAFF\"}\r\n        size=\"3x\"\r\n        style={{ marginBottom: 30 }}\r\n      />\r\n      <AuthForm newAccount={newAccount} toggleAccount={toggleAccount} />\r\n      <div className='authBtns'>\r\n        <button name=\"google\" onClick={onSocialClick} className='authBtn'>\r\n          Continue with Google <FontAwesomeIcon icon={faGoogle} />\r\n        </button>\r\n        <button name=\"github\" onClick={onSocialClick} className='authBtn'>\r\n          Continue with Github <FontAwesomeIcon icon={faGithub} />\r\n        </button>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\nexport default Auth;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  dbService,\r\n  doc,\r\n  deleteDoc,\r\n  updateDoc,\r\n  deleteObject,\r\n  ref,\r\n  storageService\r\n} from \"fbase\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Nweet = ({ nweetObj, isOwner }) => {\r\n  const [editing, setEditing] = useState(false);\r\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\r\n\r\n  const onDeleteClick = async () => {\r\n    const ok = window.confirm(\"Are you sure you want to delete this nweet?\");\r\n    console.log(ok);\r\n    if (ok) {\r\n      // delete\r\n      try {\r\n        await deleteDoc(doc(dbService, `nweets/${nweetObj.id}`));\r\n        if (nweetObj.attachmentUrl) {\r\n          await deleteObject(ref(storageService, nweetObj.attachmentUrl))\r\n        }\r\n      }\r\n      catch (err) {\r\n        console.error(\"Error deleting doc: \", err);\r\n      }\r\n    }\r\n  };\r\n  const toggleEditing = () => setEditing(prev => !prev);\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    // update\r\n    await updateDoc(doc(dbService, `nweets/${nweetObj.id}`), {\r\n      text: newNweet\r\n    });\r\n    setEditing(false);\r\n  };\r\n  const onChange = (event) => {\r\n    const {\r\n      target: {\r\n        value,\r\n      },\r\n    } = event;\r\n    setNewNweet(value);\r\n  };\r\n  return <div className=\"nweet\">\r\n    {editing ? (\r\n      isOwner && <>\r\n        <form onSubmit={onSubmit} className=\"container nweetEdit\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Edit your Nweet\"\r\n            value={newNweet}\r\n            required\r\n            autoFocus\r\n            onChange={onChange}\r\n            className=\"formInput\"\r\n          />\r\n          <input type=\"submit\" value=\"Update Nweet\" className=\"formBtn\" />\r\n        </form>\r\n        <button onClick={toggleEditing} className=\"formBtn cancelBtn\">\r\n          Cancel\r\n        </button>\r\n      </>\r\n    ) : (<>\r\n      <h4>{nweetObj.text}</h4>\r\n      {nweetObj.attachmentUrl && <img src={nweetObj.attachmentUrl} alt=\"attachment\" />}\r\n      {isOwner && (\r\n        <div className=\"nweet__actions\" >\r\n          <span onClick={onDeleteClick}>\r\n            <FontAwesomeIcon icon={faTrash} />\r\n          </span>\r\n          <span onClick={toggleEditing}>\r\n            <FontAwesomeIcon icon={faPencilAlt} />\r\n          </span>\r\n        </div>\r\n      )}\r\n    </>\r\n    )}\r\n  </div >;\r\n}\r\n\r\nexport default Nweet;","import React, { useState } from \"react\";\r\n\r\nimport {\r\n  dbService,\r\n  storageService,\r\n  addDoc,\r\n  ref,\r\n  uploadString,\r\n  getDownloadURL,\r\n  collection\r\n} from \"fbase\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPlus, faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst NweetFactory = ({ userObj }) => {\r\n  const [nweet, setNweet] = useState(\"\");\r\n  const [attachment, setAttachment] = useState(\"\");\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (nweet === \"\") {\r\n      return;\r\n    }\r\n    let attachmentUrl = \"\";\r\n    try {\r\n      if (attachment !== \"\") {\r\n        const uploadResult = await uploadString(\r\n          ref(storageService, `${userObj.uid}/${uuidv4()}`),\r\n          attachment,\r\n          \"data_url\");\r\n        attachmentUrl = await getDownloadURL(uploadResult.ref);\r\n      }\r\n      await addDoc(collection(dbService, \"nweets\"), {\r\n        text: nweet,\r\n        createdAt: Date.now(),\r\n        creatorId: userObj.uid,\r\n        attachmentUrl,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error adding document: \", error);\r\n    }\r\n    setNweet(\"\");\r\n    setAttachment(\"\");\r\n  }\r\n  const onChange = (event) => {\r\n    const {\r\n      target: { value },\r\n    } = event;\r\n    setNweet(value);\r\n  }\r\n  const onFileChange = (event) => {\r\n    const { target: { files } } = event;\r\n    const theFile = files[0];\r\n    const reader = new FileReader();\r\n    reader.onloadend = (finishedEvent) => {\r\n      const { target: { result } } = finishedEvent;\r\n      setAttachment(result);\r\n    };\r\n    reader.readAsDataURL(theFile);\r\n  }\r\n\r\n  const onClearAttachment = () => setAttachment(\"\");\r\n  return (\r\n    <form onSubmit={onSubmit} className=\"factoryForm\">\r\n      <div className=\"factoryInput__container\">\r\n        <input\r\n          className=\"factoryInput__input\"\r\n          value={nweet}\r\n          onChange={onChange}\r\n          type=\"text\"\r\n          placeholder=\"What's on your mind?\"\r\n          maxLength={120}\r\n        />\r\n        <input type=\"submit\" value=\"&rarr;\" className=\"factoryInput__arrow\" />\r\n      </div>\r\n      <label for=\"attach-file\" className=\"factoryInput__label\">\r\n        <span>Add photos</span>\r\n        <FontAwesomeIcon icon={faPlus} />\r\n      </label>\r\n      <input\r\n        id=\"attach-file\"\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={onFileChange}\r\n        style={{ opacity: 0, }}\r\n      />\r\n      {attachment && (\r\n        <div className=\"factoryForm__attachment\">\r\n          <img\r\n            src={attachment}\r\n            style={{\r\n              backgroundImage: attachment,\r\n            }}\r\n            alt={\"staged one for attachment\"}\r\n          />\r\n          <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\r\n            <span>Remove</span>\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\nexport default NweetFactory;","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  dbService,\r\n  collection,\r\n  onSnapshot,\r\n} from 'fbase';\r\nimport Nweet from 'components/Nweet';\r\nimport NweetFactory from 'components/NweetFactory';\r\n\r\nconst Home = ({ userObj }) => {\r\n  const [nweets, setNweets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    onSnapshot(collection(dbService, \"nweets\"), (snapshot) => {\r\n      const nweetObjArray = snapshot.docs.map(\r\n        doc => ({ id: doc.id, ...doc.data() })\r\n      );\r\n      nweetObjArray.sort((a, b) => (b.createdAt - a.createdAt));\r\n      setNweets(nweetObjArray);\r\n    });\r\n  }, [])\r\n\r\n  return (\r\n    <div className='container'>\r\n      <NweetFactory userObj={userObj} />\r\n      <div style={{ marginTop: 30 }}>\r\n        {nweets.map((nweetObj) => {\r\n          return <Nweet key={nweetObj.id} nweetObj={nweetObj} isOwner={nweetObj.creatorId === userObj.uid} />;\r\n        })}\r\n      </div>\r\n    </div >\r\n  );\r\n};\r\nexport default Home;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst Navigation = ({ userObj }) => {\r\n  console.log(userObj.displayName);\r\n  return <nav>\r\n    <ul style={{ display: 'flex', justifyContent: 'center', marginTop: 50 }}>\r\n      <li>\r\n        <Link to=\"/\" style={{ marginRight: 10 }}>\r\n          <FontAwesomeIcon icon={faTwitter} color={'#04AAFF'} size='2x' />\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link\r\n          to=\"/profile\"\r\n          style={{\r\n            marginLeft: 10,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            fontSize: 12\r\n          }}\r\n        >\r\n          <FontAwesomeIcon icon={faUser} color='#04AAFF' size='2x' />\r\n          <span style={{ marginTop: 10 }}>\r\n            {userObj.displayName !== null ?\r\n              `${userObj.displayName}'s Profile`\r\n              : \"Profile\"\r\n            }\r\n          </span>\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>;\r\n}\r\nexport default Navigation;","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  authService,\r\n  dbService,\r\n  collection,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  updateProfile\r\n} from 'fbase';\r\n\r\nconst Profile = ({ userObj, refreshUser }) => {\r\n  const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\r\n  const [myNweets, setMyNweets] = useState([]);\r\n  const onLogoutClick = () => {\r\n    authService.signOut();\r\n  };\r\n  const getMyNweets = async () => {\r\n    const stmt = query(collection(dbService, \"nweets\"),\r\n      where(\"creatorId\", \"==\", userObj.uid),\r\n      orderBy(\"createdAt\", \"desc\"));\r\n    const nweets = await getDocs(stmt);\r\n    const data = [];\r\n    nweets.forEach((doc) => data.push({ id: doc.id, ...doc.data() }));\r\n    setMyNweets(data);\r\n  };\r\n  useEffect(() => {\r\n    getMyNweets();\r\n  }, []);\r\n\r\n  const onChange = (event) => {\r\n    const { target: { value } } = event;\r\n    setNewDisplayName(value);\r\n  }\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (userObj.displayName !== newDisplayName) {\r\n      try {\r\n        // #1. React의 setState 함수를 통하지 않고, userObj가 참조중인 값을 변경해버림\r\n        await updateProfile(authService.currentUser, { displayName: newDisplayName });\r\n      } catch (err) {\r\n        console.error(\"Error updating Profile: \", err);\r\n      }\r\n      // 위의 #1.로 인해 리렌더가 되지 않는 상태가 되므로, state를 강제로 갈아낌 (pojo라서 안전)\r\n      refreshUser();\r\n    }\r\n  }\r\n\r\n  return (\r\n    < div className='container' >\r\n      <form onSubmit={onSubmit} className='profileForm'>\r\n        <input\r\n          type=\"text\"\r\n          autoFocus\r\n          value={newDisplayName}\r\n          onChange={onChange}\r\n          placeholder=\"Display name\"\r\n          className='formInput'\r\n        />\r\n        <input\r\n          type=\"submit\"\r\n          value=\"Update Profile\"\r\n          className='formBtn'\r\n          style={{\r\n            marginTop: 10,\r\n          }}\r\n        />\r\n      </form>\r\n      <span className='formBtn cancelBtn logOut' onClick={onLogoutClick}>\r\n        Log Out\r\n      </span>\r\n      <div>\r\n        {myNweets.map((nweetObj) => {\r\n          return <div>{nweetObj.text}</div>;\r\n        })}\r\n      </div>\r\n    </div >\r\n  );\r\n};\r\nexport default Profile;","import React from \"react\";\r\nimport { HashRouter as Router, Route, Routes, Navigate } from \"react-router-dom\";\r\nimport Auth from \"routes/Auth\";\r\nimport Home from \"routes/Home\";\r\nimport Navigation from \"components/Navigation\"\r\nimport Profile from \"routes/Profile\";\r\n\r\nconst AppRouter = ({ userObj, refreshUser }) => {\r\n  return <Router>\r\n    {userObj && <Navigation userObj={userObj}></Navigation>}\r\n    <Routes>\r\n      {userObj ? (\r\n        <>\r\n          <Route path=\"/\" element={\r\n            <div style={{\r\n              maxWidth: 890,\r\n              width: \"100%\",\r\n              margin: \"0 auto\",\r\n              marginTop: 80,\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n            }}>\r\n              <Home userObj={userObj} />\r\n            </div>\r\n          } />\r\n          <Route path=\"/profile\" element={\r\n            <div style={{\r\n              maxWidth: 890,\r\n              width: \"100%\",\r\n              margin: \"0 auto\",\r\n              marginTop: 80,\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n            }}>\r\n              <Profile userObj={userObj} refreshUser={refreshUser} />\r\n            </div>\r\n          } />\r\n        </>\r\n      ) : (\r\n        <Route path=\"/\" element={<Auth />} />\r\n      )\r\n      }\r\n      <Route path=\"*\" element={<Navigate to=\"/\"></Navigate>} />\r\n    </Routes>\r\n  </Router >\r\n}\r\n\r\nexport default AppRouter;","import React, { useEffect, useState } from \"react\";\r\nimport { authService } from \"fbase\";\r\nimport AppRouter from \"components/Router\";\r\n\r\nfunction App() {\r\n  const [init, setInit] = useState(false);\r\n  const [userObj, setUserObj] = useState(null);\r\n\r\n  useEffect(() => {\r\n    authService.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        setUserObj({\r\n          ...user\r\n        });\r\n      } else {\r\n        setUserObj(null);\r\n      }\r\n      setInit(true);\r\n    });\r\n  }, [])\r\n  function refreshUser() {\r\n    setUserObj({ ...authService.currentUser });\r\n  };\r\n  return (\r\n    <>\r\n      {init ? <AppRouter userObj={userObj} refreshUser={refreshUser} /> : \"Initializing...\"}\r\n      {/* <footer>&copy; {new Date().getFullYear()} Nwitter </footer> */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App';\nimport 'styles.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}